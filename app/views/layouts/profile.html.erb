<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name = 'keywords' content = "#{COMPANY_NAME}, #{SHORT_SITE_NAME}, #{LONG_SITE_NAME}, Idea Exchange, share, vote, rate" />
    <meta name = 'description' content = "#{LONG_SITE_NAME} is a forum for #{COMPANY_NAME} customers to share, rate, and discuss ideas about #{COMPANY_NAME}."/>

    <title>BDO Idea | User Profile: </title>
    <%= stylesheet_link_tag "profile" %>
    <%= stylesheet_link_tag "idea_form" %>
    <%= javascript_include_tag "https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js", "https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js", "jquery.tagify" %>

    <!--Tab -->
    <%= javascript_include_tag :defaults%>
    <%= javascript_include_tag 'example_text'%>
    <%= javascript_include_tag 'ga', 'global'%>
    <script>
      jQuery.noConflict(); // prevent jQuery from overriding $ operator, so that it doesn't fight with Prototype
      

      jQuery(document).ready(function() {

        //When page loads...
        jQuery(".tab_content").hide(); //Hide all content
        jQuery("ul.tabs li:first").addClass("active").show(); //Activate first tab
        jQuery(".tab_content:first").show(); //Show first tab content

        //On Click Event
        jQuery("ul.tabs li").click(function() {

          jQuery("ul.tabs li").removeClass("active"); //Remove any "active" class
          jQuery(this).addClass("active"); //Add "active" class to selected tab
          jQuery(".tab_content").hide(); //Hide all tab content

          var activeTab = jQuery(this).find("a").attr("href"); //Find the href attribute value to identify the active tab + content
          jQuery(activeTab).fadeIn(); //Fade in the active ID content
          return false;
        });

      });
    </script>



    <!--Tab -->
  </head>

  <body>
    <div class="main_wrap">
      <!--Header Starts -->
      <div class="header_wrap">
        <div class="h_top">
          <!--Logo Starts -->
          <div class="logo"><%= link_to image_tag("/images/logo.jpg"), "/"%> </div>
          <!--Logo Ends -->
          <!--Top Nav Starts -->
          <div class="top_nav">
            <ul>
              <li><%= link_to t('menu.my_profile'), profile_url(current_user)%></li>     
              <li><%= link_to t('menu.settings'), edit_user_path %></li>     
              <li><%= link_to t("menu.about"), home_path('about')%></li>
              <% if current_user.admin? %>
                <li><%= link_to 'Admin', admin_root_path%></li>
              <% end %>
              <li class="last">
                <% form_tag ideas_path, :method => :get do %>
                  <div class="fl" style="width: 12px;"><%= submit_tag "Søg", :style=> "color: #FFFFFF;background: none;border: none;text-decoration: none;cursor: pointer;text-weight:bold;" %></div>

                  <div class="fr"> <%= text_field_tag 'search_text', params[:search_text], :class => "search_input"%></div>

                <% end %>
              </li>
            </ul>
          </div>
          <!--Top Nav Ends -->
        </div>
        <!--Header Bottom Section Starts -->
        <div class="h_btm">
          <div class="menu_wrap">
            <!--Left Small Menu Panel Starts -->
            <div class="menu_container">
              <ul>
                <li><%=link_to t("menu.hot"), idea_search_path(:search => 'hot')%></li>  
                <li>|</li>  
                <li><%=link_to t("menu.recent"), idea_search_path(:search => 'recent')%></li>  
                <li>|</li>  
                <li><%= link_to  t('menu.currents'), currents_path%></li>
              </ul>
            </div>
            <!--Left Small Menu Panel Ends -->
            <!--Left Menu Panel Starts -->
            <div class="menu_container">
              <ul>
                <li><%= link_to t("menu.comments"), comments_path%></li>  
                <li>|</li>  
                <li><%= link_to t("menu.tags"), tags_path%></li>  
                <li>|</li>  
                <li><%=link_to t("menu.advance_search"), home_advance_path %></li>  
              </ul>
            </div>
            <!--Left Menu Panel Ends -->
          </div>
          <!--Logud Stuff Starts -->
          <div class="logud"><%= link_to t('menu.sign_out'), logout_path%></div>
          <!--Logud Stuff Ends -->
        </div>
        <!--Header Bottom Section Ends -->
      </div>
      <!--Header Ends -->
      <!--Slider Starts -->
      <div class="plainwrap">
        <div id ="share" class="section">
          <div class="body">
            <div id="submit-idea">

              <% form_for :idea, :url => ideas_path, :has_example_text => true, :html => { :multipart=>true, :class => 'main' } do |f|%>
                <div id="idea-title-group" class="form-group inline">
                  <label for = "idea-title">
                    <strong><%=t("idea")%></strong>
                    <small><%=t("idea_in_short")%></small></label>
                  <%= f.text_field :title, :example =>t("my_idea_is"), :maxlength => 120, :size => 51, :id => "idea-title", :class => "input-text"%>
                </div>
                <div id="idea-description-group" class="form-group inline">
                  <label for = "idea-description">
                    <strong> <%=t("description")%></strong>
                    <small><%=t('breif_explaination')%></small>
                  </label>    
                  <%= f.text_area :description, :example => t("great_if"), :id => "idea-description", :class => "input-textarea", :rows => "5", :cols => "30"%>

                  <div class="input_file">
                    <%= text_field_tag("dddd","", :size=>50 , :id=>"fakeupload", :onchange=>"this.form.fakeupload.value = this.value;")%>
                    <%=f.file_field :document , :size=>80%>
                  </div>
                </div> 
                <div id="idea-tags-group" class="form-group inline">
                  <label for = "idea-tags">
                    <strong><%=t('menu.tags')%></strong>
                    <small> <%=t("seperate_with_coma")%></small>
                  </label>
                  <%= render :partial => 'ideas/tag_editor', :locals => { :f => f }%>
                  <%= f.collection_select :current_id, Current.all_except_default, :id, :title , {:include_blank=>'Hovedveje ...'}%>
                </div>

                <div class="form-group inline">
                  <%= submit_tag 'Share My Idea', :class => "input-submit"%>
                </div>     

              <% end %>
            </div>

          </div>


          <% unless current_page?("/") %>
            <a href="#" class="tab" onclick="jQuery('.body').toggle();"><span class="dn">Del dine Ideer</span> </a>
          <% end %>
        </div>
      </div>
      <%= render :partial => "shared/flash_messages"%>
      <%= yield %>


      <%if FACEBOOK_ENABLED%>
        <%= fb_connect_async_js%>
        <script type="text/javascript">
          facebook_auth = function(success_callback) {
            FB.login(
            function(response) {
              if(response.session && success_callback)
                success_callback()
            },
            { perms: 'email,publish_stream' })
          }
          facebook_login = function(callback_url) {
            facebook_auth(function() {
              window.location = callback_url || '#{create_facebook_session_url}'
            })
          }
        </script>
      <% end %>
      <%if GOOGLE_ANALYTICS_TRACKING_CODE%>
        <script type="text/javascript">
       
          var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
          document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
          try {
            var pageTracker = _gat._getTracker("#{GOOGLE_ANALYTICS_TRACKING_CODE}");
            pageTracker._trackPageview();
          } catch(err) {}

        </script>
      <% end %>

      <script type='text/javascript'>
        //<![CDATA[
        jQuery.noConflict(); // prevent jQuery from overriding $ operator, so that it doesn't fight with Prototype
        jQuery('#idea_document').change(function(){
          var i=this
          jQuery('input#fakeupload').val(i.value);
        })
        var tags=<%= Tag.all.map(&:name).to_json %>
        var myTextArea = jQuery('#idea_tag_names').tagify();
    
        myTextArea.tagify('inputField').autocomplete({
          source: tags,
          position: { of: myTextArea.tagify('containerDiv') },
          close: function(event, ui) { myTextArea.tagify('add'); }
        });
    
        jQuery("#idea_form").submit(function(e){
          var new_values = jQuery(".tagify-container input:first").val();
          jQuery.each(new_values.split(","),function(i,data){
            myTextArea.tagify("add",data);
          });
          myTextArea.tagify("serialize");
        });
        //]]>
      </script>


      <!--Footer Starts -->
      <div class="footer">© BDO Kommunernes Revision, Godkendt revisionsaktieselskab</div>
      <!--Footer Ends -->
    </div>
  </body>
</html>