<script type='text/javascript'>
  //<![CDATA[
  jQuery.noConflict(); // prevent jQuery from overriding $ operator, so that it doesn't fight with Prototype
  
  
  jQuery('#idea_document').change(function(){
    var i=this
    jQuery('input#fakeupload').val(i.value);
  })
  var tags=<%= Tag.all.map(&:name).to_json %>
  var myTextArea = jQuery('#idea_tag_names').tagify();
    
  myTextArea.tagify('inputField').autocomplete({
    source: tags,
    position: { of: myTextArea.tagify('containerDiv') },
    close: function(event, ui) { myTextArea.tagify('add'); }
  });
    
  jQuery("#idea_form").submit(function(e){
    var new_values = jQuery(".tagify-container input:first").val();
    jQuery.each(new_values.split(","),function(i,data){
      myTextArea.tagify("add",data);
    });
    myTextArea.tagify("serialize");
  });
  //]]>
</script>

<div id ="share" class="section">
  <div class="body">
    <div id="submit-idea">

      <% form_for :idea, :url => ideas_path, :has_example_text => true, :html => { :multipart=>true, :class => 'main' } do |f|%>
        <div id="idea-title-group" class="form-group inline">
          <label for = "idea-title">
            <strong><%=t("idea")%></strong>
            <small><%=t("idea_in_short")%></small></label>
          <%= f.text_field :title, :example =>t("my_idea_is"), :maxlength => 120, :size => 51, :id => "idea-title", :class => "input-text"%>
        </div>
        <div id="idea-description-group" class="form-group inline">
          <label for = "idea-description">
            <strong> <%=t("description")%></strong>
            <small><%=t('breif_explaination')%></small>
          </label>    
          <%= f.text_area :description, :example => t("great_if"), :id => "idea-description", :class => "input-textarea", :rows => "5", :cols => "30"%>

          <div class="input_file">
            <%= text_field_tag("dddd","", :size=>50 , :id=>"fakeupload", :onchange=>"this.form.fakeupload.value = this.value;")%>
            <%=f.file_field :document , :size=>80%>
          </div>
        </div> 
        <div id="idea-tags-group" class="form-group inline">
          <label for = "idea-tags">
            <strong><%=t('menu.tags')%></strong>
            <small> <%=t("seperate_with_coma")%></small>
          </label>
          <%=  f.text_field :tag_names, :html => {:class => "input-text big"}, :style => "border:none;" %>
          <%= f.collection_select :current_id, Current.all_except_default, :id, :title , {:include_blank=>'Hovedveje ...'}, :style => "margin-left:60px;"%>
        </div>

        <div class="form-group inline">
          <%= submit_tag 'Share My Idea', :class => "input-submit"%>
        </div>     

      <% end %>
    </div>

  </div>


  <% unless current_page?("/") %>
    <a href="#" class="tab" onclick="jQuery('.body').toggle();changeContain();jQuery('.ui-autocomplete-input').addClass('input-text');"><span class="dn">Del dine Ideer</span> </a>
  <% end %>
</div>

<script type="text/javascript">
  function changeContain(){
    if(jQuery('.body').is(":visible")){
      jQuery('.dn').html("luk ideformular");
      
    }
    else{
      jQuery('.dn').html("Del dine Ideer");
      jQuery('.ui-autocomplete-input').addClass('input-text');
    }
  }
</script>